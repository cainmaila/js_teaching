<!DOCTYPE HTML>
<html>
<head>
    <title>pixi Demo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000000;
        }
    </style>
    <script src="pixi.js"></script>
    <script src="minified/TweenMax.min.js"></script>
</head>
<body>
    <script>
	// create an array of assets to load
	var assetsToLoader = [ "npc.json"];
	// create a new loader
	loader = new PIXI.AssetLoader(assetsToLoader);
	// use callback
	loader.onComplete = onAssetsLoaded;
	//begin load
	loader.load();
	// create an new instance of a pixi stage
	var stage = new PIXI.Stage(0xFF5500);
	// create a renderer instance.
	renderer = PIXI.autoDetectRenderer(800, 600);
	renderer.transparent = false;
	// add the renderer view element to the DOM
	document.body.appendChild(renderer.view);
	var explosions = [];
	var explosionTextures = [];
	function onAssetsLoaded(){
		for (var i=0; i <= 18; i++) 
		{
		 	var texture = PIXI.Texture.fromFrame("work.swf/000"+(i));
		 	explosionTextures.push(texture);
		};
		var explosion = new PIXI.MovieClip(explosionTextures);
		stage.addChild(explosion);
		explosion.animationSpeed = 1/2;
		explosion.gotoAndPlay(0);
		TweenMax.to(explosion.position,2,{x:Math.random()*800,y:Math.random()*600,onComplete:next});
		function next(){
			explosion.scale.x *= -1;
			TweenMax.to(explosion.position,2,{x:Math.random()*800,y:Math.random()*600,onComplete:next});
		}
	}
	
	requestAnimFrame( animate );
	function animate() {
	    requestAnimFrame( animate );
	    renderer.render(stage);
	}
    </script>
    </body>
</html>
