<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>利用物件生成元件</title>
    <style>
    * {
        padding: 0;
        margin: 0
    }
    
    body {
        background-color: #fff;
    }
    </style>
</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.3.5/pixi.min.js"></script>
    <script src="./ghost.js"></script>
    <script>
    var renderer = PIXI.autoDetectRenderer(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.view);
    var stage = new PIXI.Container();

    //載入素材
    PIXI.loader
        .add("./images/mc.png")
        .load(setup);

    //載入完成
    function setup() {

        var ghostList = []
        var ghost, y, x, sc, right
        for (var i = 0; i <= 50; i++) {
            y = Math.random() * window.innerHeight
            x = Math.random() * 1000
            sc = Math.random() * 0.5 + 0.1
            right = Math.random() > 0.5
            ghost = new Ghost(x, y, right, sc)
            stage.addChild(ghost.mc)
            ghostList.push(ghost)
        }

        renderer.render(stage);
        animation();

        //動畫
        function animation() {

            ghostList.map(go)

            function go(mc) {
                var v = Math.random() * 10
                mc.play(v)
                mc.play2(v)
            }


            renderer.render(stage);
            requestAnimationFrame(animation);
        }
    }


    //全螢幕設置
    renderer.view.style.position = "absolute"; //canvas css position:absolute
    renderer.view.style.display = "block"; //canvas css display:block
    renderer.autoResize = true; //canvas Resize自動重算
    window.onresize = function() { //觸發onresize
        renderer.resize(window.innerWidth, window.innerHeight); //canvas resize
        renderer.render(stage);
    }
    </script>
</body>

</html>
